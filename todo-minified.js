var ID=0;function setTitle(){if(document.getElementById("menu-date").checked){const e=new Date,t=e.getDate()+" "+e.toLocaleString("default",{month:"long"});document.getElementById("date-top").innerText=t}else if(document.getElementById("countdown").checked){var e=new Date;e.setHours(24,0,0,0);var t=new Date,n=parseInt(Math.abs(e-t)/36e5%24),o=parseInt(Math.abs(e.getTime()-t.getTime())/6e4%60),i=parseInt(Math.abs(e.getTime()-t.getTime())/1e3%60),d=String(n+" : "+o+" : "+i);document.getElementById("date-top").innerText=d}}function createTask(e){var t=document.createElement("label");return t.classList.add("container"),t.innerHTML=e+"<input type='checkbox'><span class='checkmark'></span><button id='del' onclick='deleteTask(this.parentNode)'><img src='./del.png' alt='delete' class='icon'></img></button>",document.createElement("a").inerHTML="<a id='del'></a>",t.id=String(ID),ID+=1,$("#Tasks").append(t),$("#newTask").val(""),t}function deleteTask(e){e.remove()}function changeColor(e){$("body").animate({backgroundColor:e},"normal"),$("#newTask").animate({backgroundColor:e},0),$("#del").animate({backgroundColor:e},"normal")}function openOptions(){menuOpened=!0,document.getElementById("popup").classList.add("popup-open"),$("#buttons").fadeIn(200),document.getElementById("options").setAttribute("onClick","closeOptions()"),setTimeout(function(){window.addEventListener("click",clickOutside)},500)}function clickOutside(e){document.getElementById("popup").contains(e.target)||document.getElementById("popup").contains(e.target)||($("#newTask").is(":focus")||(menuOpened=!1),closeOptions())}function closeOptions(){console.log("CALLER : "+closeOptions.caller);const e=document.getElementById("popup");e.classList.remove("popup-open"),e.classList.remove("popup-save"),e.classList.remove("popup-load"),e.classList.remove("popup-send"),e.classList.remove("popup-improve"),document.getElementById("options").setAttribute("onClick","openOptions()"),window.removeEventListener("click",clickOutside),$("#save-input").fadeOut(100,function(){$(this).remove()}),$("#save-button").fadeOut(100,function(){$(this).remove()}),$(".load-title").fadeOut(100,function(){$(this).remove()}),$(".load-enc").fadeOut(100,function(){$(this).remove()}),$(".send-notice").fadeOut(100,function(){$(this).remove()}),$("#send-guide-qr").fadeOut(100,function(){$(this).remove()}),$("#send-guide-copy").fadeOut(100,function(){$(this).remove()}),$("#qr").fadeOut(100,function(){$(this).remove()}),$("#send-copy").fadeOut(100,function(){$(this).remove()}),$("#improve-text").fadeOut(100,function(){$(this).remove()}),$("#improve-title").fadeOut(100,function(){$(this).remove()}),$("#improve-send").fadeOut(100,function(){$(this).remove()})}checkLoad(),$("#buttons").fadeOut(0),setTitle(),setInterval(function(){setTitle()},1e3),$(document).ready(function(){$("#newTask").keypress(function(e){13==e.keyCode&&(/\S/.test($("#newTask").val())&&createTask($("#newTask").val()))})}),$(document).ready(function(){$("#colorInput").keypress(function(e){13==e.keyCode&&(/[0-9A-Fa-f]{6}/g.test($("#colorInput").val())&&changeColor("#"+$("#colorInput").val()))})});var menuOpened=!1;function Save(){menuOpened=!0;const e=document.getElementById("popup");e.classList.add("popup-save"),$("#buttons").hide(),e.classList.remove("popup-open");var t=document.createElement("input");t.type="text",t.className="save-input",t.placeholder="Name of list",t.id="save-input";var n=document.createElement("button");function o(){if(/\S/.test($("#save-input").val())){var e=$("#save-input").val(),t={};const n=document.getElementById("Tasks").getElementsByTagName("label");for(let e of n)e.getElementsByTagName("input")[0].checked?t[e.id]="`/"+e.innerHTML.split("<")[0]:t[e.id]=e.innerHTML.split("<")[0];window.localStorage.setItem(e,JSON.stringify(t)),closeOptions()}}n.classList.add("save-button"),n.innerText="Save",n.id="save-button",e.appendChild(t),e.appendChild(n),setTimeout(function(){$("#save-input").focus()},500),$("#save-input").keypress(function(e){13==e.keyCode&&o()}),$("#save-button").click(function(){o()}),document.getElementById("options").setAttribute("onClick","closeOptions()"),setTimeout(function(){window.addEventListener("click",clickOutside)},500)}function Load(){menuOpened=!0;const e=document.getElementById("popup");e.classList.add("popup-load"),$("#buttons").hide(),e.classList.remove("popup-open");var t=document.createElement("p");t.innerText="Local Storage",t.classList.add("load-title"),e.appendChild(t);var n=document.createElement("div");n.classList.add("load-enc");var o=document.createElement("ul");if(o.classList.add("load-ul"),0==Object.entries(localStorage)){var i=document.createElement("img");i.src="./cat.jpg",i.id="really",n.append(i)}else{$("really").remove();for(let e of Object.entries(localStorage)){var d=document.createElement("button");d.classList.add("load-item"),d.innerText=e[0],d.setAttribute("onclick","openList(this.innerHTML)");var a=document.createElement("button"),s=document.createElement("button"),c=document.createElement("img"),u=document.createElement("img"),p=document.createElement("div");c.src="./del.png",c.classList.add("icon"),a.id="del-load",a.appendChild(c),a.setAttribute("onclick","delSave(this.parentElement)"),u.src="./plus.png",u.id="load-add-img",u.classList.add("icon"),s.appendChild(u),s.setAttribute("onclick","openList(this.parentElement.getElementsByTagName('button')[1].innerHTML, true)"),s.id="load-add",p.classList.add("load-container"),p.appendChild(a),p.appendChild(d),p.appendChild(s),o.appendChild(p)}}n.appendChild(o),e.appendChild(n),document.getElementById("options").setAttribute("onClick","closeOptions()"),setTimeout(function(){window.addEventListener("click",clickOutside)},500)}function delSave(e){e.remove(),window.localStorage.removeItem(e.innerText)}function openList(e,t=!1){t||$("#Tasks").empty();var n=window.localStorage.getItem(e),o=JSON.parse(n);for(const e of Object.keys(o)){var i=!1;o[e].includes("`/")&&(i=!0,o[e]=o[e].substr(2));var d=createTask(o[e]);i&&(d.getElementsByTagName("input")[0].checked=!0)}}function Send(){menuOpened=!0;const e=document.getElementById("popup");e.classList.add("popup-send"),$("#buttons").hide(),e.classList.remove("popup-open");var t="";const n=document.getElementById("Tasks").getElementsByTagName("label");for(let e of n)e.getElementsByTagName("input")[0].checked?t+="`/"+e.innerHTML.split("<")[0]+"/+/":t+=e.innerHTML.split("<")[0]+"/+/";content=btoa(t);var o=`www.lists.directory/?content=${content}`;if(console.log(o.length),o.length>=192&&o.length<=220)for(o+="?";o.length<=220;)o+="=";var i=document.createElement("p");i.innerText="Scan this with your phone camera",i.id="send-guide-qr",e.appendChild(i);var d=document.createElement("div");d.id="qr",e.appendChild(d),new QRCode(document.getElementById("qr"),o);var a=document.createElement("p");a.innerText="or copy and load this link",a.id="send-guide-copy",e.appendChild(a);var s=document.createElement("textarea");s.innerText=o,s.readOnly=!0,s.id="send-copy",e.appendChild(s),document.getElementById("options").setAttribute("onClick","closeOptions()"),setTimeout(function(){window.addEventListener("click",clickOutside)},500)}function checkLoad(){var e=window.location.href;if(e.includes("content")){var t=e.split("content");for(var n of(t=(t=t[1].substring(1)).split("?")[0],(t=(t=atob(t)).split("/+/")).splice(-1),t)){var o=!1;n.includes("`/")&&(o=!0,n=n.substr(2));var i=createTask(n);o&&(i.getElementsByTagName("input")[0].checked=!0)}}}function Improve(){menuOpened=!0;const e=document.getElementById("popup");e.classList.add("popup-improve"),$("#buttons").hide(),e.classList.remove("popup-open");var t=document.createElement("p");t.id="improve-title",t.innerText="Please share your experience and opinion about the website or ideas on how to improve it.";var n=document.createElement("textarea");n.id="improve-text";var o=document.createElement("form");o.setAttribute("data-netlify","true");var i=document.createElement("button");i.id="improve-send",i.type="submit",i.innerText="Send",o.appendChild(n),o.appendChild(i),e.appendChild(t),e.appendChild(o),document.getElementById("options").setAttribute("onClick","closeOptions()"),setTimeout(function(){window.addEventListener("click",clickOutside)},500)}if(screen.width<=900);else{function infoPopup(){var e=document.createElement("div"),t=document.createElement("p"),n=document.createElement("button"),o=document.createElement("img");o.src="./del.png",o.classList.add("icon"),n.appendChild(o),n.id="info-popup-exit",n.setAttribute("onclick","infoPopupClose()"),t.innerHTML=" <i><em>i</em></i> &ensp; for Input<br> <i><em>s</em></i> &ensp; for Save<br> <i><em>l</em></i> &ensp; for Load<br> <i><em>m</em></i> &ensp; for Share<br>",e.id="info-popup-div",t.id="info-popup-text",e.appendChild(n),e.appendChild(t),$(document.body).append(e),$("#info-popup-div").fadeIn(300)}function infoPopupClose(){$("#info-popup-div").remove()}$(document).ready(function(){setTimeout(function(){infoPopup()},1e3),setTimeout(function(){$("#info-popup-div").fadeOut(300,function(){$(this).remove()})},1e4)}),$("#newTask, #colorInput").focus(function(){menuOpened=!0}),$("#newTask, #colorInput").focusout(function(){menuOpened=!1}),$(document).on("keypress",function(e){("s"==e.key&&!menuOpened||"S"==e.key&&!menuOpened)&&(Save(),$("#save-input").val(""))}),$(document).on("keypress",function(e){("l"==e.key&&!menuOpened||"L"==e.key&&!menuOpened)&&Load()}),$(document).on("keypress",function(e){("m"==e.key&&!menuOpened||"M"==e.key&&!menuOpened)&&Send()}),$(document).on("keyup",function(e){"Escape"==e.key&&menuOpened&&closeOptions()}),$(document).on("keypress",function(e){"i"!=e.key||menuOpened||setTimeout(function(){$("#newTask").focus()},50)}),$(document).on("keyup",function(e){"Escape"==e.key&&$("#newTask".focus)&&$("#newTask").blur()})}$("#newTask").focus();